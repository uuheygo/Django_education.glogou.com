{% extends "schools/school_page_base.html" %} 


 {% block school_page_box %}
     <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
			    <div class="panel-heading"><h3>Latest Media Performance ({{latest_date}})</h3></div>
			    <!-- /.panel-heading -->
			    <div class="panel-body">
			        <div id="bar-chart"></div>
			    </div>
			    <!-- /.panel-body -->
                </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-8 -->
    </div>
    
    <script type="text/javascript">
	    google.load("visualization", "1.1", {packages:["bar"]});
	    google.setOnLoadCallback(drawChart);
	    
	    function drawChart() {
	        data_set = {{result_set|safe}}
	        var data = google.visualization.arrayToDataTable(data_set);
	        var options = {
	            height: 500,
	            bars: 'horizontal',
	            axes: {
	                x: {
	                  0: { side: 'top', label: 'Media Index'} // Top x-axis.
	                },
	            }
	        };
            
            function resize () {
                            var chart = new google.charts.Bar(document.getElementById('bar-chart'));
                            chart.draw(data, options);
                          }
            window.onload = resize();
            window.onresize = resize;

	    }
    </script>
{% endblock %}